!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.template=t():e.template=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=20)}([function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(17),i=n(1),u=function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"===("undefined"==typeof e?"undefined":r(e))?t=e:t.source=e,t=i.$extend(t),e=t.source,t.debug&&(t.cache=!1,t.bail=!1,t.compileDebug=!0);var n=t.debuger,u=t.filename,a=t.cache,c=t.caches;if(a&&u){var l=c.get(u);if(l)return l}if(!e)try{var f=t.resolveFilename(u,t.root,t.extname);e=t.loader(f),t.filename=f,t.source=e}catch(p){var y={path:u,name:"CompileError",message:"template not found: "+p.message,stack:p.stack};if(t.bail)throw y;return n(y)}var m=new o(t),h=function v(e){try{return v.source(e)}catch(r){if(!t.compileDebug)return t.cache=!1,t.compileDebug=!0,s(t)(e);if(t.bail)throw r;return n(r)()}};try{h.source=m.build(),a&&u&&c.set(u,h)}catch(p){if(t.bail)throw p;return n(p)}return h.toString=function(){return h.source.toString()},h};e.exports=u},function(e,t,n){"use strict";var r=n(9),o=n(8),i=n(11),u=n(13),s=n(12),a=n(10),c=n(16),l=n(15),f=n(14),p={source:null,filename:null,rules:[c,l],escape:!0,debug:!1,cache:!0,compileDebug:!1,bail:!1,resolveFilename:f,compressor:null,debuger:r,loader:u,caches:o,root:"/",extname:".art",imports:{$each:a,$escape:i,$include:s}};p.$extend=function(e){var t=Object.create(this);for(var n in e)t[n]=e[n];return t},e.exports=p},function(e,t,n){"use strict";(function(t){e.exports=!1;try{e.exports="[object process]"===Object.prototype.toString.call(t.process)}catch(n){}}).call(t,n(7))},function(e,t,n){"use strict";var r={"abstract":!0,await:!0,"boolean":!0,"break":!0,"byte":!0,"case":!0,"catch":!0,"char":!0,"class":!0,"const":!0,"continue":!0,"debugger":!0,"default":!0,"delete":!0,"do":!0,"double":!0,"else":!0,"enum":!0,"export":!0,"extends":!0,"false":!0,"final":!0,"finally":!0,"float":!0,"for":!0,"function":!0,"goto":!0,"if":!0,"implements":!0,"import":!0,"in":!0,"instanceof":!0,"int":!0,"interface":!0,let:!0,"long":!0,"native":!0,"new":!0,"null":!0,"package":!0,"private":!0,"protected":!0,"public":!0,"return":!0,"short":!0,"static":!0,"super":!0,"switch":!0,"synchronized":!0,"this":!0,"throw":!0,"transient":!0,"true":!0,"try":!0,"typeof":!0,"var":!0,"void":!0,"volatile":!0,"while":!0,"with":!0,"yield":!0};e.exports=function(e){return r.hasOwnProperty(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyu]{1,5}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|(0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?)|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-\/%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2})=?|[?~.,:;[\](){}])|(\s+)|(^$|[\s\S])/g,t.matchToToken=function(e){var t={type:"invalid",value:e[0]};return e[1]?(t.type="string",t.closed=!(!e[3]&&!e[4])):e[5]?t.type="comment":e[6]?(t.type="comment",t.closed=!!e[7]):e[8]?t.type="regex":e[9]?t.type="number":e[10]?t.type="name":e[11]?t.type="punctuator":e[12]&&(t.type="whitespace"),t}},function(e,t,n){"use strict"},function(e,t,n){"use strict";var r=n(0),o=function(e,t,n){return r(e,n)(t)};e.exports=o},function(e,t,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(1,eval)("this")}catch(i){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";var r={__data:Object.create(null),set:function(e,t){this.__data[e]=t},get:function(e){return this.__data[e]},reset:function(){this.__data={}}};e.exports=r},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){if("object"===("undefined"==typeof console?"undefined":r(console))){var t=e.stack;delete e.stack,e=JSON.stringify(e,null,4),console.error("Template Error: "+e+"\n\n"+t)}return function(){return"{Template Error}"}};e.exports=o},function(e,t,n){"use strict";var r=function(e,t){if(Array.isArray(e))for(var n=0,r=e.length;r>n;n++)t(e[n],n,e);else for(var o in e)t(e[o],o)};e.exports=r},function(e,t,n){"use strict";var r=function(e){var t=/&(?![\w#]+;)|[<>"']/g,n={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},r=function o(e){return"string"!=typeof e&&(e="function"==typeof e?o(e.call(e)):null===e?"":JSON.stringify(e)||""),e};return r(e).replace(t,function(e){return n[e]})};e.exports=r},function(e,t,n){"use strict";var r=function(e,t,r){var o=n(0);return r=r.$extend({filename:r.resolveFilename(e,r.root,r.extname,r.filename),source:null}),o(r)(t)};e.exports=r},function(e,t,n){"use strict";var r=n(2),o=function(e){if(r){var t=n(5);return t.readFileSync(e,"utf8")}var o=document.getElementById(e);return o.value||o.innerHTML};e.exports=o},function(e,t,n){"use strict";var r=n(2),o=function(e,t,o,i){if(r){var u=n(5),s=i?u.dirname(i):"";return u.extname(e)||(e+=o),u.resolve(t,s,e)}return e};e.exports=o},function(e,t,n){"use strict";var r={test:/{{([@#]?)(\/?)([\w\W]*?)}}/,use:function(e,t,n,r){var i=this,u=i.options,s=i.getEsTokens(r.trim()),a=s.map(function(e){return e.value}),c={},l=void 0,f=t?"raw":!1,p=n+a.shift(),y=function(e,t){console.warn("Template upgrade example:","{{"+e+"}}",">>>","{{"+t+"}}","\n",u.filename||"")};switch("#"===t&&y("#value","@value"),p){case"set":r="var "+a.join("");break;case"if":r="if("+a.join("")+"){";break;case"else":"if"===a[0]?(a.shift(),r="}else if("+a.join("")+"){"):r="}else{";break;case"/if":r="}";break;case"each":l=o(s),l.shift(),"as"===l[1]&&(y("each object as value index","each object value index"),l.splice(1,1));var m=l[0]||"$data",h=l[1]||"$value",v=l[2]||"$index";r="$each("+m+",function("+h+","+v+"){";break;case"/each":r="})";break;case"echo":p="print",y("echo value","value");case"print":case"include":l=o(s),l.shift(),r=p+"("+l.join(",")+")";break;default:if(-1!==a.indexOf("|")){for(var d=p,b=[],g=":",x=a.filter(function(e){return!/^\s+$/.test(e)});"|"!==x[0];)d+=x.shift();x.filter(function(e){return e!==g}).forEach(function(e){"|"===e?b.push([]):b[b.length-1].push(e)}),b.reduce(function(e,t){var n=t.shift();return t.unshift(e),r=n+"("+t.join(",")+")"},d)}else u.imports[p]?(y("filterName value","value | filterName"),l=o(s),l.shift(),r=p+"("+l.join(",")+")",f="raw"):r=""+p+a.join("");f||(f="escape")}return c.code=r,c.output=f,c}},o=function(e){for(var t=0,n=e.shift(),r=[[n]];t<e.length;){var o=e[t],i=o.type;"whitespace"!==i&&"comment"!==i&&("punctuator"===n.type&&"]"!==n.value||"punctuator"===i?r[r.length-1].push(o):r.push([o]),n=o),t++}return r.map(function(e){return e.map(function(e){return e.value}).join("")})};r._split=o,e.exports=r},function(e,t,n){"use strict";var r={test:/<%(#?)((?:==|=#|[=-])?)([\w\W]*?)(-?)%>/,use:function(e,t,n,r){var o={"-":"raw","=":"escape","":!1,"==":"raw","=#":"raw"};return t&&(r="//"+r),{code:r,output:o[n]}}};e.exports=r},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(18),s=n(19),a=n(3),c="$data",l="$imports",f=function(e,t){return e.hasOwnProperty(t)},p=JSON.stringify,y=function(){function e(t){var n=this;o(this,e);var r=t.source;this.options=t,this.scripts=[],this.context={},this.internal={$out:'""',$line:'[0,0,0,""]',print:"function(){var text=''.concat.apply('',arguments);return $out+=text}",include:"function(src,data){return $out+=$imports.$include(src,data||"+c+",$imports.$options)}"},this.options.imports.$options=t,this.importContext("$out"),t.compileDebug&&this.importContext("$line"),this.getTplTokens(r,t.rules,this).forEach(function(e){e.type===s.TYPE_STRING?n.parseString(e):n.parseExpression(e)})}return i(e,[{key:"getTplTokens",value:function(){return s.apply(void 0,arguments)}},{key:"getEsTokens",value:function(e){return u(e)}},{key:"getVariables",value:function(e){var t=!1;return e.filter(function(e){return"whitespace"!==e.type&&"comment"!==e.type}).filter(function(e){return"name"!==e.type||t?(t="punctuator"===e.type&&"."===e.value,!1):!0}).map(function(e){return e.value})}},{key:"importContext",value:function(e){var t="",n=this.internal,r=this.context,o=this.options,i=o.imports;f(r,e)||e===c||e===l||a(e)||(t=f(n,e)?n[e]:f(i,e)?l+"."+e:c+"."+e,r[e]=t)}},{key:"parseString",value:function(e){var t=e.value,n=this.options,r=n.compressor;r&&(t=r(t));var o="$out+="+p(t);this.scripts.push({source:t,tplToken:e,code:o})}},{key:"parseExpression",value:function(e){var t=this,n=e.value,r=e.line,o=e.start,i=this.options,u=i.compileDebug,a=e.script,c=a.output,l=a.code.trim();if(c&&(l=escape===!1||c===s.TYPE_RAW?"$out+="+a.code:"$out+=$escape("+a.code+")"),u){var f=[r,o,p(n)].join(",");this.scripts.push({source:n,tplToken:e,code:"$line=["+f+"]"})}var y=this.getEsTokens(l);this.getVariables(y).forEach(function(e){return t.importContext(e)}),this.scripts.push({source:n,tplToken:e,code:l})}},{key:"checkExpression",value:function(e){for(var t=[[/^\s*?}.*?{?[\s;]*?$/,""],[/(^[\w\W]*?\s*?function\s*?\([\w\W]*?\)\s*?{[\s;]*?$)/,"$1})"],[/(^.*?\(\s*?[\w\W]*?=>\s*?{[\s;]*?$)/,"$1})"],[/(^[\w\W]*?\([\w\W]*?\)\s*?{[\s;]*?$)/,"$1}"]],n=0;n<t.length;){if(t[n][0].test(e)){var o;e=(o=e).replace.apply(o,r(t[n]));break}n++}try{return new Function(e),!0}catch(i){return!1}}},{key:"build",value:function(){var e=this.options,t=this.context,n=this.scripts,r=e.source,o=e.filename,i=e.imports,u='"use strict"',s="var "+Object.keys(t).map(function(e){return e+"="+t[e]}).join(","),a=n.map(function(e){return e.code}).join(";\n"),f="return $out",y=[u,s,a,f].join(";\n");if(e.compileDebug){var m="{"+["path:"+p(o),'name:"RuntimeError"',"message:e.message","line:$line[0]+1","start:$line[1]+1","source:$line[2]","stack:e.stack"].join(",")+"}";y="try{"+y+"}catch(e){throw "+m+"}"}y="function("+c+"){\n"+y+"\n}";try{return new Function(l,"return "+y)(i)}catch(h){for(var v=0,d=0,b=0,g=r;v<n.length;){var x=n[v];if(!this.checkExpression(x.code)){g=x.source,d=x.tplToken.line,b=x.tplToken.start;break}v++}throw{path:o,name:"CompileError",message:h.message,line:d+1,start:b+1,source:g,script:y,stack:h.stack}}}}]),e}();e.exports=y},function(e,t,n){"use strict";var r=n(4)["default"],o=n(4).matchToToken,i=n(3),u=function(e){var t=e.match(r).map(function(e){return r.lastIndex=0,o(r.exec(e))}).map(function(e){return"name"===e.type&&i(e.value)&&(e.type="keyword"),e});return t};e.exports=u},function(e,t,n){"use strict";var r="string",o="expression",i="raw",u="escape",s=function(e,t,n){for(var i=[{type:r,value:e,line:0,start:0,end:e.length}],u=function(e){for(var t=e.test.ignoreCase?"ig":"g",u=e.test.source+"|^$|[\\w\\W]",s=new RegExp(u,t),a=0;a<i.length;a++)if(i[a].type===r){for(var c=i[a].line,l=i[a].start,f=i[a].end,p=i[a].value.match(s),y=[],m=0;m<p.length;m++){var h=p[m];e.test.lastIndex=0;var v=e.test.exec(h),d=v?o:r,b=y[y.length-1],g=b||i[a],x=g.value;l=g.line===c?b?b.end:l:x.length-x.lastIndexOf("\n")-1,f=l+h.length;var w={type:d,value:h,line:c,start:l,end:f};if(d===r)b&&b.type===r?(b.value+=h,b.end+=h.length):y.push(w);else{var $=e.use.apply(n,v);w.script=$,y.push(w)}c+=h.split(/\n/).length-1}i.splice.apply(i,[a,1].concat(y)),a+=y.length-1}},s=0;s<t.length;s++)u(t[s]);return i};s.TYPE_STRING=r,s.TYPE_EXPRESSION=o,s.TYPE_RAW=i,s.TYPE_ESCAPE=u,e.exports=s},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=n(6),i=n(0),u=n(1),s=function(e,t){return"object"===("undefined"==typeof t?"undefined":r(t))?o({filename:e},t):i({filename:e,source:t})};s.render=o,s.compile=i,s.defaults=u,e.exports=s}])});