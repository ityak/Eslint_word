!function(t){t.cluetip={version:"1.2.5",template:["<div>",'<div class="cluetip-outer">','<h3 class="cluetip-title"></h3>','<div class="cluetip-inner"></div>',"</div>",'<div class="cluetip-extra"></div>','<div class="cluetip-arrows cluetip-arrows-border"></div>','<div class="cluetip-arrows"></div>',"</div>"].join(""),setup:{insertionType:"appendTo",insertionElement:"body"},defaults:{multiple:!1,width:200,height:"auto",cluezIndex:1101,positionBy:"auto",position:"right",topOffset:15,leftOffset:15,local:!1,localPrefix:null,localIdSuffix:null,hideLocal:!0,attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:!1,showTitle:!0,cluetipClass:"jtip",hoverClass:"",waitImage:!0,arrows:!0,dropShadow:!1,dropShadowSteps:6,sticky:!1,mouseOutClose:!1,activation:"hover",clickThrough:!0,tracking:!1,delayedClose:0,closePosition:"title",closeText:"Ã—",truncate:0,locateObject:null,theme:"default",maxWidth:2e3,minWidth:0,maxHeight:2e3,minHeight:0,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(t){return!0},onShow:function(t,e){},onHide:function(t,e){},ajaxCache:!0,ajaxProcess:function(t){return t=t.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:!1}};var e,i="cluetip ",l={},o=0,a=0;t.fn.attrProp=t.fn.attr||t.fn.prop,t.fn.cluetip=function(n,s){function c(e,i,l){var o="",a=i.dropShadow&&i.dropShadowSteps?+i.dropShadowSteps:0;if(t.support.boxShadow){a&&(o="1px 1px "+a+"px rgba(0,0,0,0.5)");return e.css(t.support.boxShadow,o),!1}var n=e.find(".cluetip-drop-shadow");if(a==n.length)return n;n.remove();for(var s=[],c=0;a>c;)s[c++]='<div style="top:'+c+"px;left:"+c+'px;"></div>';return l=t(s.join("")).css({position:"absolute",backgroundColor:"#000",zIndex:v-1,opacity:.1}).addClass("cluetip-drop-shadow").prependTo(e)}var r,p,d,u,h,f;if("object"==typeof n&&(s=n,n=null),"destroy"==n){var m=this.data("cluetip");if(m)return t(m.selector).remove(),t.removeData(this,"title"),t.removeData(this,"cluetip"),t(document).unbind(".cluetip"),this.unbind(".cluetip")}s=t.extend(!0,{},t.cluetip.defaults,s||{}),o++;var v,g=t.cluetip.backCompat||!s.multiple?"cluetip":"cluetip-"+o,x="#"+g,b=t.cluetip.backCompat?"#":".",w=t.cluetip.setup.insertionType,I=t.cluetip.setup.insertionElement||"body";w=/appendTo|prependTo|insertBefore|insertAfter/.test(w)?w:"appendTo",r=t(x),r.length||(r=t(t.cluetip.template)[w](I).attr("id",g).css({position:"absolute",display:"none"}),v=+s.cluezIndex,d=r.find(b+"cluetip-outer").css({position:"relative",zIndex:v}),p=r.find(b+"cluetip-inner"),u=r.find(b+"cluetip-title")),e=t("#cluetip-waitimage"),e.length||(e=t("<div></div>").attr("id","cluetip-waitimage").css({position:"absolute"})),e.insertBefore(r).hide();var T=(parseInt(r.css("paddingLeft"),10)||10)+(parseInt(r.css("paddingRight"),10)||10);return this.each(function(o){function m(){return!1}function g(t,e){var i=t.status;e.beforeSend(t.xhr,e),"error"==i?e[i](t.xhr,t.textStatus):"success"==i&&e[i](t.data,t.textStatus,t.xhr),e.complete(t.xhr,e.textStatus)}var w=this,I=t(this),W=t.extend(!0,{},s,t.metadata?I.metadata():t.meta?I.data():I.data("cluetip")||{}),k=!1,y=!1,S=0,C=null,j=null,P=W[W.attribute]||("href"==W.attribute?I.attr(W.attribute):I.attrProp(W.attribute)||I.attr(W.attribute)),z=W.cluetipClass;if(v=+W.cluezIndex,I.data("cluetip",{title:w.title,zIndex:v,selector:x}),!P&&!W.splitTitle&&!n)return!0;W.local&&W.localPrefix&&(P=W.localPrefix+P),W.local&&W.hideLocal&&P&&t(P+":first").hide();var O,B,H,A,L,M,X,E,N,Y,D,R,$=parseInt(W.topOffset,10),q=parseInt(W.leftOffset,10),Q=isNaN(parseInt(W.height,10))?"auto":/\D/g.test(W.height)?W.height:W.height+"px",U=function(e,i){tipInnerWidth=parseInt(e.width,10)||275;var l=i.attrProp(e.titleAttribute);if(l&&-1!=l.indexOf("<script>")&&(l=htmlspecialchars_encode(l)),"auto"==e.width){var o=t("<div>").html(l).css({fontSize:"12px",position:"absolute",maxWidth:parseInt(e.maxWidth),minWidth:parseInt(e.minWidth)}).appendTo("body");tipInnerWidth=o.outerWidth(),o.remove()}tipWidth=tipInnerWidth+T,linkWidth=i[0].offsetWidth,linkHeight=i[0].offsetHeight,!linkWidth&&i[0].getBBox&&(linkWidth=i[0].getBBox().width,linkHeight=i[0].getBBox().height),tipParts=[],tipTitle="title"!=e.attribute?l||"":"",e.splitTitle&&(tipParts=tipTitle.split(e.splitTitle),tipTitle=e.showTitle||""===tipParts[0]?tipParts.shift():""),e.escapeTitle&&(tipTitle=tipTitle.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;"))},_=function(i){var c,f,m=W.onActivate(I);if(m===!1)return!1;y=!0;var v=W.locateObject?W.locateObject:I;U(W,v),r=t(x).css({position:"absolute"}),d=r.find(b+"cluetip-outer"),p=r.find(b+"cluetip-inner"),u=r.find(b+"cluetip-title"),h=r.find(b+"cluetip-arrows"),r.removeClass().css({width:parseInt(W.width,10)||"auto"}),W.hoverClass&&I.addClass(W.hoverClass),A=L=I.offset().top,N=I.offset().left,i.type==focus?(D=N+linkWidth/2+q,X=L+$):(D=i.pageX,X=i.pageY);var T=w.tagName.toLowerCase();if("area"!=T&&(H=t(document).scrollTop(),R=t(window).width()),r.removeAttr("doc-click-hide"),W.locateObject&&(A=L=W.locateObject.offset().top,N=W.locateObject.offset().left,linkWidth=W.locateObject.width(),r.attr("doc-click-hide",!0)),"fixed"==W.positionBy||W.locateObject?(Y=linkWidth+N+q,("input"==T||W.locateObject||"textarea"==T||"select"==T)&&(Y+=5,L+=2)):"bottomTop"==W.positionBy?Y=N+linkWidth/2-tipWidth/2+q>R?R-tipWidth/2-q:Math.max(N+linkWidth/2-tipWidth/2+q,0):("area"==T||"mouse"==W.positionBy||linkWidth+tipWidth>R?D+20+tipWidth>R?(r.addClass("cluetip-"+z),Y=D-tipWidth-q>=0?D-tipWidth-q-parseInt(r.css("marginLeft"),10)+parseInt(p.css("marginRight"),10):D-tipWidth/2):Y=D+q:Y=linkWidth>N&&N>tipWidth||N+linkWidth+tipWidth+q>R||"left"==W.position?N-tipWidth-q:linkWidth+N+q,c=0>Y?i.pageY+$:i.pageY,0>Y&&(Y=D+tipWidth/2>R?R/2-tipWidth/2:Math.max(D-tipWidth/2,0))),r.css({left:Y,zIndex:I.data("cluetip").zIndex}),d.css({maxWidth:parseInt(W.maxWidth),minWidth:parseInt(W.minWidth),maxHeight:parseInt(W.maxHeight),minHeight:parseInt(W.minHeight)}),B=t(window).height(),n)"function"==typeof n&&(n=n.call(w)),p.html(n),F(c);else if(tipParts.length){var S=tipParts.length;if(S?p.html(tipParts[0]):p.html(""),S>1)for(var C=1;S>C;C++)p.append('<div class="split-body">'+tipParts[C]+"</div>");F(c)}else if(W.local||0===P.indexOf("#")){if(W.local){var j=t(P+(/^#\S+$/.test(P)?"":":eq("+o+")")).clone(!0).show();W.localIdSuffix&&j.attr("id",j[0].id+W.localIdSuffix),p.html(j),F(c)}}else if(/\.(jpe?g|tiff?|gif|png)(?:\?.*)?$/i.test(P))p.html('<img src="'+P+'" alt="'+tipTitle+'" />'),F(c);else{var O=W.ajaxSettings.beforeSend,M=W.ajaxSettings.error,E=W.ajaxSettings.success,Q=W.ajaxSettings.complete,_={cache:W.ajaxCache,url:P,beforeSend:function(t,i){O&&O.call(w,t,r,p,i),d.children().empty(),W.waitImage&&e.css({top:X+20,left:D+20,zIndex:I.data("cluetip").zIndex-1}).show()},error:function(t,e){s.ajaxCache&&!l[P]&&(l[P]={status:"error",textStatus:e,xhr:t}),y&&(M?M.call(w,t,e,r,p):p.html("<i>sorry, the contents could not be loaded</i>"))},success:function(t,e,i){s.ajaxCache&&!l[P]&&(l[P]={status:"success",data:t,textStatus:e,xhr:i}),k=W.ajaxProcess.call(w,t),"object"==typeof k&&null!==k&&(tipTitle=k.title,k=k.content),y&&(E&&E.call(w,t,e,r,p),p.html(k))},complete:function(i,l){Q&&Q.call(w,i,l,r,p);var o=p[0].getElementsByTagName("img");a=o.length;for(var n=0,s=o.length;s>n;n++)o[n].complete&&a--;a&&!t.browser.opera?t(o).bind("load.ct error.ct",function(){a--,0===a&&(e.hide(),t(o).unbind(".ct"),y&&F(c))}):(e.hide(),y&&F(c))}};f=t.extend(!0,{},W.ajaxSettings,_),l[P]?g(l[P],f):t.ajax(f)}},F=function(e){t("#cluetip .cluetip-title").html("");var l,o,a,n=tipTitle||W.showTitle&&"&nbsp;",s="",m="";if(r.addClass("cluetip-"+z),W.truncate){var v=p.text().slice(0,W.truncate)+"...";p.html(v)}n?(u.show(),"&nbsp;"!=n&&u.html("<span class='cluetip-title-text'>"+n+"</span>")):u.hide(),W.sticky&&(l=t('<div class="cluetip-close"><a href="javascript:;">'+W.closeText+"</a></div>"),"bottom"==W.closePosition?l.appendTo(p):"title"==W.closePosition?l.prependTo(u):l.prependTo(p),l.bind("click.cluetip",function(){return J(),!1}),W.mouseOutClose?r.bind("mouseenter.cluetip",function(){clearTimeout(j)}).bind("mouseleave.cluetip",function(){C=setTimeout(function(){J()},500)}):r.unbind("mouseleave.cluetip")),d.css({zIndex:I.data("cluetip").zIndex,overflow:"auto"==Q?"visible":"auto",height:Q}),O="auto"==Q?Math.max(r.outerHeight(),r.height()):parseInt(Q,10),E=H+B,"fixed"==W.positionBy||W.locateObject?M=L+linkHeight/2-O/2:D>Y&&Math.max(Y,0)+tipWidth>D||"bottomTop"==W.positionBy?"top"==W.position||L+O+$>E&&X-H>O+$?(M=A?A-O-$:X-O-$,m="top"):(M=A&&linkHeight?A+linkHeight+$:X+$,m="bottom"):L+O+$>E?M=O>=B?H:E-O-$:"mouse"==W.positionBy?M=e-$:(a=L+linkHeight/2-O/2,0>a?a=0:a>E&&(a=L),M=a),""===m&&(m=W.position?W.position:N>Y?"left":"right"),o=" clue-"+m+"-"+z+" cluetip-"+z,"rounded"==z&&(o+=" ui-corner-all"),W.theme&&(o+=" "+W.theme),r.css({top:M+"px"}).attrProp({"class":i+o}),W.arrows?(h.removeAttr("style"),h.css({zIndex:I.data("cluetip").zIndex+1}),/(left|right)/.test(m)?(s=O/2-5,h.css({top:s})):(bgX=tipWidth/2-5,h.css({left:bgX}))):h.hide(),f=c(r,W),f&&f.length&&f.hide().css({height:O,width:tipInnerWidth,zIndex:I.data("cluetip").zIndex-1}).show(),r.hide()[W.fx.open](W.fx.openSpeed||0),t.fn.bgiframe&&r.bgiframe(),W.delayedClose>0&&(S=setTimeout(J,W.delayedClose)),W.onShow.call(w,r,p)},G=function(t){y=!1,e.hide(),J(),clearTimeout(S),W.hoverClass&&I.removeClass(W.hoverClass)},J=function(e){var i=e&&e.data("cluetip")?e:I,l=i.data("cluetip")&&i.data("cluetip").selector,o=l||"div.cluetip",a=t(o),n=a.find(b+"cluetip-inner");a.find(b+"cluetip-arrows");a.hide().removeClass(),W.onHide.call(i[0],a,n),l&&i.removeClass("cluetip-clicked"),l&&tipTitle&&i.attrProp(W.titleAttribute,tipTitle)};if(t(document).unbind("hideCluetip.cluetip").bind("hideCluetip.cluetip",function(e){J(t(e.target))}),/click|toggle/.test(W.activation))I.bind("click.cluetip",function(e){return W.locateObject?(I.attrProp("title",""),void _(e)):(r.is(":hidden")||!I.is(".cluetip-clicked")?(_(e),t(".cluetip-clicked").removeClass("cluetip-clicked"),I.addClass("cluetip-clicked")):G(e),!1)});else if("focus"==W.activation)I.bind("focus.cluetip",function(t){I.attrProp("title",""),_(t)}),I.bind("blur.cluetip",function(t){I.attrProp("title",I.data("cluetip").title),G(t)});else{I[W.clickThrough?"unbind":"bind"]("click.cluetip",m);var K=function(t){if(W.tracking){var e=Y-t.pageX;e=e>0?30:-r.width()-20;var i=-10;I.bind("mousemove.cluetip",function(t){r.css({left:t.pageX+e}),"bottomTop"!=W.positionBy&&r.css({top:t.pageY+i})})}};t.fn.hoverIntent&&W.hoverIntent?I.hoverIntent({sensitivity:W.hoverIntent.sensitivity,interval:W.hoverIntent.interval,over:function(t){_(t),K(t)},timeout:W.hoverIntent.timeout,out:function(t){G(t),I.unbind("mousemove.cluetip")}}):I.bind("mouseenter.cluetip",function(t){W.sticky&&(clearTimeout(j),clearTimeout(C)),_(t),K(t)}).bind("mouseleave.cluetip",function(t){W.sticky?(clearTimeout(j),j=setTimeout(function(){G(t),I.unbind("mousemove.cluetip")},500)):(G(t),I.unbind("mousemove.cluetip"))}),I.bind("mouseover.cluetip",function(t){I.attrProp("title","")}).bind("mouseleave.cluetip",function(t){I.attrProp("title",I.data("cluetip").title)}).bind("click.cluetip",function(){J()})}}),this},function(){t.support=t.support||{};for(var e=document.createElement("div"),i=e.style,l=["boxShadow"],o=["moz","Moz","webkit","o"],a=0,n=l.length;n>a;a++){var s=l[a],c=s.charAt(0).toUpperCase()+s.slice(1);if("undefined"!=typeof i[s])t.support[s]=s;else for(var r=0,p=o.length;p>r;r++)if("undefined"!=typeof i[o[r]+c]){t.support[s]=o[r]+c;break}}e=null}(),t.fn.cluetip.defaults=t.cluetip.defaults}(jQuery);